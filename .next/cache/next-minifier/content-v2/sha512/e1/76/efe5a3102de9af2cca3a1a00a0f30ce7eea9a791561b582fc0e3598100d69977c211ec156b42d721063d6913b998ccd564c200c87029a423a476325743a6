{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{FtJ3:function(e,t,n){\"use strict\";var a=n(\"VLSD\");t.a=a.instance},Jifx:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/tokens\",function(){return n(\"cVF7\")}])},NNTU:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return j}));var a=n(\"wx14\"),s=n(\"dI71\"),o=n(\"Og4/\"),r=n.n(o),i=n(\"bNQv\"),c=n.n(i),u=n(\"Wt1U\"),l=n.n(u),p=n(\"ijCd\"),d=n.n(p),f=n(\"5MGi\"),h=(n(\"17x9\"),n(\"q1tI\")),b=n.n(h),m=n(\"nPHS\"),g=n(\"FtJ3\"),v=n(\"TIbl\"),O=n(\"Y53p\"),k=n(\"ICNK\"),j=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).calculations={bottomPassed:!1,bottomVisible:!1,fits:!1,passing:!1,offScreen:!1,onScreen:!1,topPassed:!1,topVisible:!1},t.firedCallbacks=[],t.ref=Object(h.createRef)(),t.fire=function(e,n,a){var s=e.callback,o=e.name;void 0===a&&(a=!1);var r=t.props,i=r.continuous,c=r.once,u=t.calculations[n]!==a,p=i||t.calculations[n]!==t.oldCalculations[n];u&&p&&t.execute(s,o),c||(t.firedCallbacks=l()(t.firedCallbacks,o))},t.handleUpdate=function(){t.ticking||(t.ticking=!0,t.frameId=requestAnimationFrame(t.update))},t.update=function(){if(t.mounted){t.ticking=!1,t.oldCalculations=t.calculations,t.calculations=t.computeCalculations(),t.pageYOffset=t.getPageYOffset();var e=t.props,n=e.onBottomPassed,s=e.onBottomPassedReverse,o=e.onBottomVisible,i=e.onBottomVisibleReverse,u=e.onPassing,l=e.onPassingReverse,p=e.onTopPassed,d=e.onTopPassedReverse,f=e.onTopVisible,h=e.onTopVisibleReverse,b=e.onOffScreen,m=e.onOnScreen,g=e.updateOn,v={bottomPassed:{callback:n,name:\"onBottomPassed\"},bottomVisible:{callback:o,name:\"onBottomVisible\"},passing:{callback:u,name:\"onPassing\"},offScreen:{callback:b,name:\"onOffScreen\"},onScreen:{callback:m,name:\"onOnScreen\"},topPassed:{callback:p,name:\"onTopPassed\"},topVisible:{callback:f,name:\"onTopVisible\"}},O={bottomPassed:{callback:s,name:\"onBottomPassedReverse\"},bottomVisible:{callback:i,name:\"onBottomVisibleReverse\"},passing:{callback:l,name:\"onPassingReverse\"},topPassed:{callback:d,name:\"onTopPassedReverse\"},topVisible:{callback:h,name:\"onTopVisibleReverse\"}};r()(t.props,\"onUpdate\",null,Object(a.a)({},t.props,{calculations:t.calculations})),t.fireOnPassed(),c()(O,(function(e,n){return t.fire(e,n,!0)})),c()(v,(function(e,n){return t.fire(e,n)})),\"repaint\"===g&&t.handleUpdate()}},t}Object(s.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){if(this.mounted=!0,Object(m.a)()){var e=this.props,t=e.context,n=e.fireOnMount,a=e.updateOn;this.pageYOffset=this.getPageYOffset(),this.attachHandlers(t,a),n&&this.update()}},n.componentDidUpdate=function(e){(e.continuous!==this.props.continuous||e.once!==this.props.once||e.updateOn!==this.props.updateOn)&&(this.firedCallbacks=[]),e.context===this.props.context&&e.updateOn===this.props.updateOn||(this.unattachHandlers(e.context),this.attachHandlers(this.props.context,this.props.updateOn))},n.componentWillUnmount=function(){var e=this.props.context;this.unattachHandlers(e),this.mounted=!1},n.attachHandlers=function(e,t){\"events\"!==t?this.handleUpdate():e&&(g.a.sub(\"resize\",this.handleUpdate,{target:e}),g.a.sub(\"scroll\",this.handleUpdate,{target:e}))},n.unattachHandlers=function(e){e&&(g.a.unsub(\"resize\",this.handleUpdate,{target:e}),g.a.unsub(\"scroll\",this.handleUpdate,{target:e})),this.frameId&&cancelAnimationFrame(this.frameId)},n.execute=function(e,t){var n=this.props.continuous;e&&(!n&&d()(this.firedCallbacks,t)||(e(null,Object(a.a)({},this.props,{calculations:this.calculations})),this.firedCallbacks.push(t)))},n.fireOnPassed=function(){var e=this,t=this.calculations,n=t.percentagePassed,a=t.pixelsPassed,s=this.props.onPassed;c()(s,(function(t,s){var o=Number(s);if(o&&a>=o)e.execute(t,s);else{var r=(\"\"+s).match(/^(\\d+)%$/);if(r){var i=Number(r[1])/100;n>=i&&e.execute(t,s)}}}))},n.computeCalculations=function(){var e=this.props.offset,t=this.ref.current.getBoundingClientRect(),n=t.bottom,a=t.height,s=t.top,o=t.width,r=Object(v.a)(e),i=r[0],c=r[1],u=this.getPageYOffset()>this.pageYOffset?\"down\":\"up\",l=s<i,p=n<c,d=p?0:Math.max(-1*s,0),f=d/a,h=n>=c&&n<=window.innerHeight,b=s>=i&&s<=window.innerHeight,m=(b||l)&&!p;return{bottomPassed:p,bottomVisible:h,direction:u,fits:b&&h,height:a,passing:l&&!p,percentagePassed:f,pixelsPassed:d,offScreen:!m,onScreen:m,topPassed:l,topVisible:b,width:o}},n.getPageYOffset=function(){var e=this.props.context;return e?e===window?window.pageYOffset:e.scrollTop:0},n.render=function(){var e=this.props.children,n=Object(O.a)(t,this.props),a=Object(k.a)(t,this.props);return b.a.createElement(f.a,{innerRef:this.ref},b.a.createElement(n,a,e))},t}(h.Component);j.handledProps=[\"as\",\"children\",\"context\",\"continuous\",\"fireOnMount\",\"offset\",\"onBottomPassed\",\"onBottomPassedReverse\",\"onBottomVisible\",\"onBottomVisibleReverse\",\"onOffScreen\",\"onOnScreen\",\"onPassed\",\"onPassing\",\"onPassingReverse\",\"onTopPassed\",\"onTopPassedReverse\",\"onTopVisible\",\"onTopVisibleReverse\",\"onUpdate\",\"once\",\"updateOn\"],j.propTypes={},j.defaultProps={context:Object(m.a)()?window:null,continuous:!1,offset:[0,0],once:!0,updateOn:\"events\"}},TIbl:function(e,t,n){\"use strict\";t.a=function(e){return\"number\"===typeof e||\"string\"===typeof e?[e,e]:e}},aQu0:function(e,t,n){\"use strict\";var a=n(\"wx14\"),s=(n(\"Wt1U\"),n(\"iuhU\")),o=(n(\"17x9\"),n(\"q1tI\")),r=n.n(o),i=n(\"ZeOK\"),c=n(\"ICNK\"),u=n(\"Y53p\"),l=n(\"H+2d\"),p=n(\"D1pA\"),d=n(\"5XkN\"),f=n(\"MZgk\");function h(e){var t=e.children,n=e.className,o=e.content,i=Object(s.a)(\"sub header\",n),p=Object(c.a)(h,e),d=Object(u.a)(h,e);return r.a.createElement(d,Object(a.a)({},p,{className:i}),l.b.isNil(t)?o:t)}h.handledProps=[\"as\",\"children\",\"className\",\"content\"],h.propTypes={},h.create=Object(f.e)(h,(function(e){return{content:e}}));var b=h;function m(e){var t=e.children,n=e.className,o=e.content,i=Object(s.a)(\"content\",n),p=Object(c.a)(m,e),d=Object(u.a)(m,e);return r.a.createElement(d,Object(a.a)({},p,{className:i}),l.b.isNil(t)?o:t)}m.handledProps=[\"as\",\"children\",\"className\",\"content\"],m.propTypes={};var g=m;function v(e){var t=e.attached,n=e.block,o=e.children,f=e.className,h=e.color,m=e.content,O=e.disabled,k=e.dividing,j=e.floated,y=e.icon,x=e.image,P=e.inverted,w=e.size,T=e.sub,N=e.subheader,R=e.textAlign,I=Object(s.a)(\"ui\",h,w,Object(i.a)(n,\"block\"),Object(i.a)(O,\"disabled\"),Object(i.a)(k,\"dividing\"),Object(i.e)(j,\"floated\"),Object(i.a)(!0===y,\"icon\"),Object(i.a)(!0===x,\"image\"),Object(i.a)(P,\"inverted\"),Object(i.a)(T,\"sub\"),Object(i.b)(t,\"attached\"),Object(i.d)(R),\"header\",f),C=Object(c.a)(v,e),H=Object(u.a)(v,e);if(!l.b.isNil(o))return r.a.createElement(H,Object(a.a)({},C,{className:I}),o);var S=p.a.create(y,{autoGenerateKey:!1}),V=d.a.create(x,{autoGenerateKey:!1}),E=b.create(N,{autoGenerateKey:!1});return S||V?r.a.createElement(H,Object(a.a)({},C,{className:I}),S||V,(m||E)&&r.a.createElement(g,null,m,E)):r.a.createElement(H,Object(a.a)({},C,{className:I}),m,E)}v.handledProps=[\"as\",\"attached\",\"block\",\"children\",\"className\",\"color\",\"content\",\"disabled\",\"dividing\",\"floated\",\"icon\",\"image\",\"inverted\",\"size\",\"sub\",\"subheader\",\"textAlign\"],v.propTypes={},v.Content=g,v.Subheader=b;t.a=v},cVF7:function(e,t,n){\"use strict\";n.r(t);var a,s,o,r=n(\"o0o1\"),i=n.n(r),c=n(\"HaE+\"),u=n(\"1OyB\"),l=n(\"vuIU\"),p=n(\"JX7q\"),d=n(\"Ji7U\"),f=n(\"md7G\"),h=n(\"foSv\"),b=n(\"rePB\"),m=n(\"q1tI\"),g=n.n(m),v=n(\"5Yp1\"),O=n(\"z8k1\"),k=n(\"NNTU\"),j=n(\"5XkN\"),y=n(\"yE/o\"),x=n(\"QetY\"),P=n(\"D1pA\"),w=n(\"aQu0\"),T=n(\"igWR\"),N=n(\"8cHP\"),R=n(\"oZBQ\"),I=n(\"qcXG\"),C=n(\"vDqi\"),H=n.n(C),S=g.a.createElement;function V(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var s=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var E=function(e){Object(d.a)(n,e);var t=V(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s)),Object(b.a)(Object(p.a)(e),\"state\",{mounted:!1,headerHeight:0,pausedHeight:0,images:{},buyLoading:!1,jdentHeigth:270}),Object(b.a)(Object(p.a)(e),\"buyToken\",function(){var t=Object(c.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.name,n.preventDefault(),e.setState({buyLoading:!0}),t.prev=3,t.next=6,T.a.methods.buyToken(a).send({from:o,value:e.props.tokenInfo[a].price});case 6:N.Router.replaceRoute(\"/tokens\"),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(3);case 11:e.setState({buyLoading:!1});case 12:case\"end\":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()),Object(b.a)(Object(p.a)(e),\"updateImage\",function(){var t=Object(c.a)(i.a.mark((function t(n,a){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=a.calculations,e.setState({jdentHeigth:s.height-60});case 2:case\"end\":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),e}return Object(l.a)(n,[{key:\"componentDidMount\",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,c,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.eth.getAccounts();case 2:o=e.sent[0],a=document.getElementById(\"header\"),t=setInterval((function(){\"visible\"===a.style.visibility&&(s=document.getElementById(\"pausedmsg\"),u.setState({transVisible:!0,headerHeight:a.clientHeight,pausedHeight:s.clientHeight}),clearInterval(t))}),100),window.addEventListener(\"pausedClosed\",(function(e){u.setState({pausedHeight:0})})),n={},r=0;case 8:if(!(r<this.props.supply)){e.next=22;break}return c=this.props.tokens[r],e.prev=10,e.next=13,H.a.get(\"../static/images/ERC721/\".concat(c,\".jpg\"));case 13:n[c]=!0,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),n[c]=!1;case 19:r++,e.next=8;break;case 22:return e.next=24,this.setState({images:n});case 24:this.setState({mounted:!0});case 25:case\"end\":return e.stop()}}),e,this,[[10,16]])})));return function(){return e.apply(this,arguments)}}()},{key:\"renderTokens\",value:function(){var e=this,t=this.props.tokens.map((function(t){return t=Number(t),S(O.a,{key:t},e.state.images[t]?1==t?S(k.a,{onUpdate:e.updateImage},S(j.a,{src:\"/static/images/ERC721/\".concat(t,\".jpg\"),wrapped:!0})):S(j.a,{src:\"/static/images/ERC721/\".concat(t,\".jpg\"),wrapped:!0}):S(y.a,{textAlign:\"center\",style:{background:\"rgba(0,0,0,.05)\",overflow:\"auto\",paddingTop:\"30px\",paddingBottom:\"30px\"}},S(I.a,{value:t,size:e.state.jdentHeigth})),S(O.a.Content,null,S(O.a.Header,null,t<=\"4\"?\"Viking Collection #\"+t:\"Classic Token #\"+(Number(t)-\"4\")),S(O.a.Description,null,S(\"b\",null,Number(e.props.tokenInfo[t].price)?\"Token price: \"+R.a.utils.fromWei(e.props.tokenInfo[t].price,\"ether\")+\" ETH\":\"Token not for sale\")),S(O.a.Meta,{style:{overflow:\"auto\",fontSize:\"0.9em\"}},\"Owner\",o==e.props.tokenInfo[t].owner?\" (You)\":\"\",\": \",e.props.tokenInfo[t].owner)),S(O.a.Content,{extra:!0},S(N.Link,{route:\"/token/\".concat(t)},S(\"a\",null,S(x.a,null,\"View Details\",S(P.a,{name:\"chevron circle right\"})))),Number(e.props.tokenInfo[t].price)&&e.props.tokenInfo[t].owner!=o?S(x.a,{name:t,primary:!0,onClick:e.buyToken,loading:e.state.buyLoading,disabled:e.state.buyLoading},\"Buy token\",S(P.a,{name:\"shopping cart right\"})):\"\"))}));return S(O.a.Group,{itemsPerRow:3},t)}},{key:\"render\",value:function(){return S(v.a,{mounted:this.state.mounted},S(y.a,{textAlign:\"center\",style:{marginTop:this.state.pausedHeight?20:this.state.headerHeight+20}},S(w.a,{as:\"h2\",dividing:!0,inverted:!0},\"There are currently \",this.props.supply,\" existing tokens.\"),this.renderTokens()))}}],[{key:\"getInitialProps\",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,s,o,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,T.a.methods.totalSupply().call();case 3:n=e.sent,a=0;case 5:if(!(a<n)){e.next=13;break}return e.next=8,T.a.methods.tokenByIndex(a).call();case 8:s=e.sent,t.push(s);case 10:a++,e.next=5;break;case 13:o={},r=0;case 15:if(!(r<t.length)){e.next=27;break}return c=t[r],o[c]={},e.next=20,T.a.methods.ownerOf(c).call();case 20:return o[c].owner=e.sent,e.next=23,T.a.methods.getTokenPrice(c).call();case 23:o[c].price=e.sent;case 24:r++,e.next=15;break;case 27:return t.sort((function(e,t){return e-t})),e.abrupt(\"return\",{tokens:t,supply:n,tokenInfo:o});case 29:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(m.Component);t.default=E}},[[\"Jifx\",0,1,2,3,5,9]]]);","extractedComments":[]}