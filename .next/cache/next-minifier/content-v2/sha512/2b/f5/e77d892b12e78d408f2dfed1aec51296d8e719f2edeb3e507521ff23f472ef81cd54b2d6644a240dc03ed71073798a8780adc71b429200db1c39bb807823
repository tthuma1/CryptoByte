{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[24],{\"4Mi2\":function(e,t,n){\"use strict\";n.r(t);var r,a,o,i=n(\"o0o1\"),s=n.n(i),c=n(\"HaE+\"),u=n(\"1OyB\"),p=n(\"vuIU\"),l=n(\"JX7q\"),h=n(\"Ji7U\"),d=n(\"md7G\"),f=n(\"foSv\"),g=n(\"rePB\"),m=n(\"q1tI\"),b=n.n(m),v=n(\"5Yp1\"),k=n(\"yE/o\"),y=n(\"z8k1\"),w=n(\"5XkN\"),E=n(\"QetY\"),x=n(\"D1pA\"),I=n(\"TbSc\"),O=n(\"qcXG\"),j=n(\"igWR\"),H=n(\"oZBQ\"),T=n(\"8cHP\"),S=n(\"vDqi\"),_=n.n(S),N=b.a.createElement;function C(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var R=function(e){Object(h.a)(n,e);var t=C(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(g.a)(Object(l.a)(e),\"state\",{mounted:!1,headerHeight:0,pausedHeight:0,image:!1,buyLoading:!1,msgErr:\"\"}),Object(g.a)(Object(l.a)(e),\"buyToken\",function(){var t=Object(c.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.setState({buyLoading:!0,msgErr:\"\"}),t.next=4,j.a.methods.getTokenPrice(e.props.id).call();case 4:return a=t.sent,t.prev=5,t.next=8,j.a.methods.buyToken(e.props.id).send({from:r,value:a});case 8:T.Router.replaceRoute(\"/token/\".concat(e.props.id)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),e.setState({msgErr:t.t0.message});case 14:e.setState({buyLoading:!1});case 15:case\"end\":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}()),e}return Object(p.a)(n,[{key:\"componentDidMount\",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.eth.getAccounts();case 2:return r=e.sent[0],a=document.getElementById(\"header\"),t=setInterval((function(){\"visible\"===a.style.visibility&&(o=document.getElementById(\"pausedmsg\"),n.setState({transVisible:!0,headerHeight:a.clientHeight,pausedHeight:o.clientHeight}),clearInterval(t))}),100),window.addEventListener(\"pausedClosed\",(function(e){n.setState({pausedHeight:0})})),e.prev=6,e.next=9,_.a.get(\"/static/images/ERC721/\".concat(this.props.id,\".jpg\"));case 9:return e.next=11,this.setState({image:!0});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),e.next=17,this.setState({image:!1});case 17:this.setState({mounted:!0});case 18:case\"end\":return e.stop()}}),e,this,[[6,13]])})));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){return N(v.a,{mounted:this.state.mounted},N(k.a,{textAlign:\"center\",style:{marginTop:this.state.pausedHeight?20:this.state.headerHeight+20}},N(y.a,{fluid:!0},this.state.image?N(k.a,{textAlign:\"center\",style:{background:\"rgba(0,0,0,.05)\",overflow:\"auto\"}},N(w.a,{src:\"/static/images/ERC721/\".concat(this.props.id,\".jpg\"),size:\"big\",wrapped:!0})):N(k.a,{textAlign:\"center\",style:{background:\"rgba(0,0,0,.05)\",overflow:\"auto\"}},N(O.a,{value:this.props.id,size:270})),N(y.a.Content,null,N(y.a.Header,null,Number(this.props.id)<=\"4\"?\"Viking Collection #\"+this.props.id:\"Classic Token #\"+(Number(this.props.id)-\"4\")),N(y.a.Description,null,N(\"b\",null,Number(this.props.tokenInfo.price)?\"Token price: \"+H.a.utils.fromWei(this.props.tokenInfo.price,\"ether\")+\" ETH\":\"Token not for sale\")),N(y.a.Meta,{style:{overflow:\"auto\"}},\"Owner\",r==this.props.tokenInfo.owner?\" (You)\":\"\",\": \",this.props.tokenInfo.owner)),N(y.a.Content,{extra:!0},this.props.tokenInfo.owner==r?N(\"div\",null,N(T.Link,{route:\"/sell/\".concat(this.props.id)},N(\"a\",null,N(E.a,null,Number(this.props.tokenInfo.price)?\"Change price or remove from sale\":\"Put up for sale\",N(x.a,{name:\"tag right\"})))),N(T.Link,{route:\"/gift/\".concat(this.props.id)},N(\"a\",null,N(E.a,null,\"Gift token\",N(x.a,{name:\"gift right\"}))))):\"\",this.props.tokenInfo.owner!=r&&Number(this.props.tokenInfo.price)?N(E.a,{primary:!0,onClick:this.buyToken,loading:this.state.buyLoading,disabled:this.state.buyLoading},\"Buy token\",N(x.a,{name:\"shopping cart right\"})):\"\")),this.state.msgErr&&N(I.a,{negative:!0,compact:!0},N(I.a.Header,null,\"Something went wrong!\"),this.state.msgErr)))}}],[{key:\"getInitialProps\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r={},a=n.id,e.next=5,j.a.methods.ownerOf(a).call();case 5:return r.owner=e.sent,e.next=8,j.a.methods.getTokenPrice(a).call();case 8:return r.price=e.sent,e.abrupt(\"return\",{id:n.id,tokenInfo:r});case 10:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(m.Component);t.default=R},qg6E:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/token\",function(){return n(\"4Mi2\")}])}},[[\"qg6E\",0,1,2,3,5,9]]]);","extractedComments":[]}