{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{\"2l4L\":function(e,t,a){\"use strict\";a.r(t);var n=a(\"o0o1\"),r=a.n(n),s=a(\"HaE+\"),o=a(\"1OyB\"),l=a(\"vuIU\"),d=a(\"JX7q\"),u=a(\"Ji7U\"),i=a(\"md7G\"),c=a(\"foSv\"),h=a(\"rePB\"),f=a(\"q1tI\"),p=a.n(f),m=a(\"5Yp1\"),v=a(\"8Kt/\"),g=a.n(v),w=a(\"ikXu\"),b=a(\"QetY\"),y=a(\"NNTU\"),k=a(\"yE/o\"),A=a(\"aQu0\"),C=a(\"+6Dn\"),x=a(\"vFsZ\"),E=a(\"umxb\"),B=a(\"pLir\"),R=a(\"TbSc\"),S=a(\"NrgV\"),O=a(\"yo71\"),j=a(\"oZBQ\"),H=a(\"JZpj\"),I=a(\"kB5k\"),_=a.n(I),L=a(\"8cHP\"),T=p.a.createElement;function N(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var F,P,V,X,Y,J,M,U,D,K=[{key:\"GCRB\",text:\"GCRB (1e+9)\",value:\"1e+9\"},{key:\"MCRB\",text:\"MCRB (1e+6)\",value:\"1e+6\"},{key:\"kCRB\",text:\"kCRB (1000)\",value:\"1000\"},{key:\"CRB\",text:\"CRB (1)\",value:\"1\"},{key:\"mCRB\",text:\"mCRB (0.001)\",value:\"0.001\"},{key:\"\\xb5CRB\",text:\"\\xb5CRB (1e-6)\",value:\"1e-6\"},{key:\"nCRB\",text:\"nCRB (1e-9)\",value:\"1e-9\"},{key:\"pCRB\",text:\"pCRB (1e-12)\",value:\"1e-12\"},{key:\"fCRB\",text:\"fCRB (1e-15)\",value:\"1e-15\"},{key:\"aCRB\",text:\"aCRB (1e-18)\",value:\"1e-18\"}],G={},Q=function(e){Object(u.a)(a,e);var t=N(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return e=t.call.apply(t,[this].concat(l)),Object(h.a)(Object(d.a)(e),\"state\",{mounted:!1,headerHeight:0,pausedHeight:0,allowancesLoaded:!1,senAddr:\"\",recAddr:\"\",amount:\"\",senAddrErr:!1,recAddrErr:!1,amountErr:!1,msgErr:\"\",loading:!1,succes:!0,dropdownValue:\"1\",dropdownKey:\"CRB\"}),Object(h.a)(Object(d.a)(e),\"getCryptoByteInfo\",Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.methods.decimals().call();case 2:return X=e.sent,e.next=5,H.a.methods.symbol().call();case 5:return Y=e.sent,e.next=8,j.a.eth.getAccounts();case 8:\"undefined\"!==typeof(J=e.sent[0])&&(V=!0);case 10:case\"end\":return e.stop()}}),e)})))),Object(h.a)(Object(d.a)(e),\"getAllowanceInfo\",Object(s.a)(r.a.mark((function t(){var a,n,s,o,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({allowancesLoaded:!1}),!V){t.next=14;break}return t.next=4,H.a.getPastEvents(\"Approval\",{fromBlock:0,toBlock:\"latest\",filter:{spender:J}});case 4:a=t.sent,n=0;case 6:if(!(n<a.length)){t.next=13;break}return t.next=9,H.a.methods.allowance(a[n].returnValues.owner,J).call();case 9:G[a[n].returnValues.owner]=t.sent;case 10:n++,t.next=6;break;case 13:for(s=0,o=Object.keys(G);s<o.length;s++)l=o[s],\"0\"===G[l]&&delete G[l];case 14:e.setState({allowancesLoaded:!0});case 15:case\"end\":return t.stop()}}),t)})))),Object(h.a)(Object(d.a)(e),\"renderAllowances\",(function(){var t=[],a=function(a){t.push(T(w.a.Row,{key:a},T(w.a.Cell,{style:{overflow:\"hidden\",whiteSpace:\"nowrap\",textOverflow:\"ellipsis\"}},T(L.Link,{href:\"/account/\".concat(a)},T(\"a\",{title:a},a))),T(w.a.Cell,{title:G[a]/Math.pow(10,X)},(G[a]/Math.pow(10,X)).toLocaleString(\"en-US\")+\" \"+Y),T(w.a.Cell,null,T(b.a,{fluid:!0,onClick:function(){e.setState({senAddr:a,senAddrErr:!1})},style:{overflow:\"auto\"}},\"Transfer from this address\"))))};for(var n in G)a(n);return t.length>0?T(w.a.Body,null,t):T(w.a.Body,null,T(w.a.Row,null,T(w.a.Cell,{colSpan:\"3\"},\"Looks like nobody allows you any \",Y,\".\")))})),Object(h.a)(Object(d.a)(e),\"onSubmit\",Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0,msgErr:\"\",success:!1}),t.prev=1,!e.state.senAddrErr&&\"\"!==e.state.senAddr){t.next=4;break}throw{message:\"Invalid sender address.\"};case 4:if(!e.state.recAddrErr&&\"\"!==e.state.recAddr){t.next=6;break}throw{message:\"Invalid receiver address.\"};case 6:if(!e.state.amountErr&&\"\"!==e.state.amount){t.next=8;break}throw{message:\"Amount must be a positive number.\"};case 8:return M=_()(e.state.amount),U=_()(e.state.dropdownValue),D=_()(\"1e+\"+X),U=U.times(D),M=M.times(U),console.log(M.toFixed()),t.next=16,H.a.methods.transferFrom(j.a.utils.toChecksumAddress(e.state.senAddr),j.a.utils.toChecksumAddress(e.state.recAddr),M.toFixed()).send({from:J});case 16:e.setState({loading:!1,success:!0}),e.getAllowanceInfo(),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),e.setState({loading:!1,msgErr:t.t0.message});case 23:case\"end\":return t.stop()}}),t,null,[[1,20]])})))),Object(h.a)(Object(d.a)(e),\"updateContent\",(function(){e.setState({headerHeight:F.clientHeight})})),e}return Object(l.a)(a,[{key:\"componentDidMount\",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F=document.getElementById(\"header\"),t=setInterval((function(){\"visible\"===F.style.visibility&&(P=document.getElementById(\"pausedmsg\"),a.setState({headerHeight:F.clientHeight,pausedHeight:P.clientHeight}),clearInterval(t))}),100),window.addEventListener(\"pausedClosed\",(function(e){a.setState({pausedHeight:0})})),e.next=5,this.getCryptoByteInfo();case 5:return this.setState({mounted:!0}),e.next=8,this.getAllowanceInfo();case 8:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this;return T(m.a,{mounted:this.state.mounted},T(g.a,null,T(\"title\",null,\"Crypto Byte - Transfer allowed\")),T(O.a,null),T(y.a,{onUpdate:this.updateContent},T(k.a,{style:{marginTop:this.state.pausedHeight?20:this.state.headerHeight+20}},T(A.a,{as:\"h3\",inverted:!0,dividing:!0,textAlign:\"center\"},\"You can transfer tokens, that you are allowed by other accounts with the form below.\"),T(C.a,{stackable:!0,divided:!0,inverted:!0},T(C.a.Row,{columns:2},T(C.a.Column,null,T(x.a,{inverted:!0,onSubmit:this.onSubmit},T(x.a.Input,{error:this.state.senAddrErr,label:\"Sender address (tokens will be transferred from this address)\"},T(E.a,{placeholder:\"0x0000000000000000000000000000000000000000\",value:this.state.senAddr,onChange:function(t){e.setState({senAddr:t.target.value}),t.target.value.match(/^(0x||0X)[a-fA-F0-9]{40}$/g)||\"\"===t.target.value?e.setState({senAddrErr:!1}):e.setState({senAddrErr:{content:\"Please enter a valid address.\"}})}})),T(x.a.Input,{error:this.state.recAddrErr,label:\"Receiver address (tokens will be transferred to this address)\"},T(E.a,{placeholder:\"0x0000000000000000000000000000000000000000\",value:this.state.recAddr,onChange:function(t){e.setState({recAddr:t.target.value}),t.target.value.match(/^(0x||0X)[a-fA-F0-9]{40}$/g)||\"\"===t.target.value?e.setState({recAddrErr:!1}):e.setState({recAddrErr:{content:\"Please enter a valid address.\"}})}})),T(x.a.Input,{label:\"Amount to transfer\",error:this.state.amountErr,style:{width:\"90%\"}},T(E.a,{placeholder:\"123.456\",label:T(B.a,{scrolling:!0,value:this.state.dropdownValue,options:K,onChange:function(t,a){e.setState({dropdownValue:a.value,dropdownKey:a.options.find((function(e){return e.value===a.value})).key})}}),labelPosition:\"right\",value:this.state.amount,onChange:function(t){e.setState({amount:t.target.value}),(isNaN(t.target.value)||parseFloat(t.target.value)<0||\"0x\"===t.target.value.substring(0,2))&&\"\"!==t.target.value?e.setState({amountErr:{content:\"The amount must be a positive number.\"}}):e.setState({amountErr:!1})}})),this.state.amount&&this.state.senAddr&&this.state.recAddr&&!this.state.amountErr&&!this.state.senAddrErr&&!this.state.recAddrErr&&T(R.a,{info:!0,style:{overflow:\"auto\"}},T(\"p\",null,\"This is going to transfer\",\" \",T(\"b\",null,this.state.amount,\" \",this.state.dropdownKey),\" \",\"from\",\" \",T(\"b\",null,j.a.utils.toChecksumAddress(this.state.senAddr)),\" \",\"to\",\" \",T(\"b\",null,j.a.utils.toChecksumAddress(this.state.recAddr)),\".\")),this.state.msgErr&&T(\"div\",null,T(R.a,{negative:!0,compact:!0},T(R.a.Header,null,\"Something went wrong!\"),this.state.msgErr),T(\"br\",null)),this.state.success&&T(\"div\",null,T(R.a,{positive:!0,compact:!0},T(R.a.Header,null,\"Transaction complete!\"),\"The transaction was completed successfully.\"),T(\"br\",null)),T(b.a,{type:\"submit\",loading:this.state.loading,disabled:this.state.loading},\"Submit\"))),T(C.a.Column,null,T(w.a,{unstackable:!0,inverted:!0,striped:!0,celled:!0,fixed:!0},T(w.a.Header,null,T(w.a.Row,null,T(w.a.HeaderCell,{colSpan:\"3\"},\"You are currently allowed \",Y,\" by:\")),T(w.a.Row,{columns:2},T(w.a.HeaderCell,{textAlign:\"center\"},\"Address\"),T(w.a.HeaderCell,{textAlign:\"center\"},\"Value\"),T(w.a.HeaderCell,null))),this.state.allowancesLoaded?this.renderAllowances():T(w.a.Body,null,T(w.a.Row,null,T(w.a.Cell,{colSpan:\"3\"},T(S.a,{active:!0,inline:\"centered\",inverted:!0})))))))))))}}]),a}(f.Component);t.default=Q},RYFs:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/manage/transfer_allowed\",function(){return a(\"2l4L\")}])}},[[\"RYFs\",0,1,2,3,4,6,7,8]]]);","extractedComments":[]}