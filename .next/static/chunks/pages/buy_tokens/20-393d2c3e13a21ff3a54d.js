_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"8ZpQ":function(t,e,n){"use strict";n.r(e);var a=n("o0o1"),s=n.n(a),o=n("HaE+"),i=n("1OyB"),r=n("vuIU"),c=n("JX7q"),u=n("Ji7U"),l=n("md7G"),p=n("foSv"),d=n("rePB"),h=n("q1tI"),f=n.n(h),m=n("5Yp1"),b=n("8Kt/"),g=n.n(b),v=n("yo71"),y=n("NNTU"),O=n("yE/o"),x=n("aQu0"),k=n("vFsZ"),w=n("umxb"),C=n("pLir"),P=n("TbSc"),B=n("QetY"),S=n("oZBQ"),T=n("JZpj"),R=n("kB5k"),E=n.n(R),H=f.a.createElement;function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var s=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var U,V,I,D,N,_,A=[{key:"GCRB",text:"GCRB (1e+9)",value:"1e+9"},{key:"MCRB",text:"MCRB (1e+6)",value:"1e+6"},{key:"kCRB",text:"kCRB (1000)",value:"1000"},{key:"CRB",text:"CRB (1)",value:"1"},{key:"mCRB",text:"mCRB (0.001)",value:"0.001"},{key:"\xb5CRB",text:"\xb5CRB (1e-6)",value:"1e-6"},{key:"nCRB",text:"nCRB (1e-9)",value:"1e-9"},{key:"pCRB",text:"pCRB (1e-12)",value:"1e-12"},{key:"fCRB",text:"fCRB (1e-15)",value:"1e-15"},{key:"aCRB",text:"aCRB (1e-18)",value:"1e-18"}],Y=function(t){Object(u.a)(n,t);var e=j(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return t=e.call.apply(e,[this].concat(r)),Object(d.a)(Object(c.a)(t),"state",{mounted:!1,headerHeight:0,pausedHeight:0,amount:"",amountErr:!1,amountETH:0,amountUSD:0,ETHtoUSD:0,dropdownValue:"1",dropdownKey:"CRB",msgErr:!1,success:!1}),Object(d.a)(Object(c.a)(t),"getCryptoByteInfo",Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.methods.decimals().call();case 2:return t.sent,t.next=5,T.a.methods.symbol().call();case 5:return t.sent,t.next=8,T.a.methods.tokenPrice().call();case 8:return I=t.sent,I=E()(I).div("1e+18"),t.next=12,S.a.eth.getAccounts();case 12:D=t.sent[0];case 13:case"end":return t.stop()}}),t)})))),Object(d.a)(Object(c.a)(t),"getETHprice",(function(){fetch("https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=USD&api_key=".concat("3da1f1bf49627edea41dab5568b095304a7a03547caebdfe3cc3b5bb4adbefc9")).then(function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,n.json();case 3:e.t1=e.sent.USD,e.t2={ETHtoUSD:e.t1},e.t0.setState.call(e.t0,e.t2),"undefined"!==typeof _&&t.setState({amountUSD:_.times(t.state.ETHtoUSD).toFixed()});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),Object(d.a)(Object(c.a)(t),"onSubmit",Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({loading:!0,msgErr:"",success:!1}),e.prev=1,!t.state.amountErr&&""!==t.state.amount){e.next=4;break}throw{message:"Amount must be a positive number."};case 4:if("0"!==t.state.amountETH){e.next=6;break}throw{message:"Can't buy that few tokens (you should increase the amount)."};case 6:return e.next=8,T.a.methods.buyToken().send({from:D,value:S.a.utils.toWei(t.state.amountETH,"ether")});case 8:t.setState({loading:!1,success:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.setState({loading:!1,msgErr:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))),Object(d.a)(Object(c.a)(t),"setAmountETH",(function(e){if(""!==e){e=E()(e).times(E()(t.state.dropdownValue)),_=e.times(I);try{S.a.utils.toWei(_.toFixed(),"ether")}catch(n){_=E()(_.toFixed().split(".")[0]+"."+_.toFixed().split(".")[1].substring(0,18))}N=_.times(t.state.ETHtoUSD),t.setState({amountETH:_.toFixed(),amountUSD:N.toFixed()})}else t.setState({amountETH:0,amountUSD:0})})),Object(d.a)(Object(c.a)(t),"updateContent",(function(){t.setState({headerHeight:U.clientHeight})})),t}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,n=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return U=document.getElementById("header"),e=setInterval((function(){"visible"===U.style.visibility&&(V=document.getElementById("pausedmsg"),n.setState({transVisible:!0,headerHeight:U.clientHeight,pausedHeight:V.clientHeight}),clearInterval(e))}),100),window.addEventListener("pausedClosed",(function(t){n.setState({pausedHeight:0})})),t.next=5,this.getETHprice();case 5:return setInterval(this.getETHprice,3e4),t.next=8,this.getCryptoByteInfo();case 8:this.setState({mounted:!0});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return H(m.a,{mounted:!0},H(g.a,null,H("title",null,"Crypto Byte - Buy tokens")),H(v.a,null),H(y.a,{onUpdate:this.updateContent},H(O.a,{style:{marginTop:this.state.pausedHeight?20:this.state.headerHeight+20}},H(x.a,{as:"h3",inverted:!0,dividing:!0,textAlign:"center"},"You can buy Crypto Byte tokens (CRB) with ETH with the form below."),H(k.a,{inverted:!0,onSubmit:this.onSubmit},H(k.a.Group,{widths:"equal"},H(k.a.Input,{label:"Amount of CRB to buy",error:this.state.amountErr},H(w.a,{placeholder:"123.456",label:H(C.a,{scrolling:!0,value:this.state.dropdownValue,options:A,onChange:function(){var e=Object(o.a)(s.a.mark((function e(n,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({dropdownValue:a.value,dropdownKey:a.options.find((function(t){return t.value===a.value})).key});case 2:t.setAmountETH(t.state.amount);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),labelPosition:"right",value:this.state.amount,onChange:function(e){t.setState({amount:e.target.value}),(isNaN(e.target.value)||parseFloat(e.target.value)<0||"0x"===e.target.value.substring(0,2))&&""!==e.target.value?t.setState({amountErr:{content:"The amount must be a positive number."},amountETH:0,amountUSD:0}):(t.setState({amountErr:!1}),t.setAmountETH(e.target.value))}})),H(k.a.Field,null,H("label",null),H(P.a,null,"This purchase is going to cost you ",this.state.amountETH," ","ETH (~ $",this.state.amountUSD,")."))),this.state.amount&&!this.state.amountErr&&H(P.a,{info:!0},H("p",null,"You are going to buy"," ",H("b",null,this.state.amount," ",this.state.dropdownKey)," ","with this transaction.")),this.state.msgErr&&H("div",null,H(P.a,{negative:!0,compact:!0},H(P.a.Header,null,"Something went wrong!"),this.state.msgErr),H("br",null)),this.state.success&&H("div",null,H(P.a,{positive:!0,compact:!0},H(P.a.Header,null,"Transaction complete!"),"The transaction was completed successfully."),H("br",null)),H(B.a,{type:"submit",loading:this.state.loading,disabled:this.state.loading},"Purchase")))))}}]),n}(h.Component);e.default=Y},NNTU:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var a=n("wx14"),s=n("dI71"),o=n("Og4/"),i=n.n(o),r=n("bNQv"),c=n.n(r),u=n("Wt1U"),l=n.n(u),p=n("ijCd"),d=n.n(p),h=n("5MGi"),f=(n("17x9"),n("q1tI")),m=n.n(f),b=n("nPHS"),g=n("FtJ3"),v=n("TIbl"),y=n("Y53p"),O=n("ICNK"),x=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this).calculations={bottomPassed:!1,bottomVisible:!1,fits:!1,passing:!1,offScreen:!1,onScreen:!1,topPassed:!1,topVisible:!1},e.firedCallbacks=[],e.ref=Object(f.createRef)(),e.fire=function(t,n,a){var s=t.callback,o=t.name;void 0===a&&(a=!1);var i=e.props,r=i.continuous,c=i.once,u=e.calculations[n]!==a,p=r||e.calculations[n]!==e.oldCalculations[n];u&&p&&e.execute(s,o),c||(e.firedCallbacks=l()(e.firedCallbacks,o))},e.handleUpdate=function(){e.ticking||(e.ticking=!0,e.frameId=requestAnimationFrame(e.update))},e.update=function(){if(e.mounted){e.ticking=!1,e.oldCalculations=e.calculations,e.calculations=e.computeCalculations(),e.pageYOffset=e.getPageYOffset();var t=e.props,n=t.onBottomPassed,s=t.onBottomPassedReverse,o=t.onBottomVisible,r=t.onBottomVisibleReverse,u=t.onPassing,l=t.onPassingReverse,p=t.onTopPassed,d=t.onTopPassedReverse,h=t.onTopVisible,f=t.onTopVisibleReverse,m=t.onOffScreen,b=t.onOnScreen,g=t.updateOn,v={bottomPassed:{callback:n,name:"onBottomPassed"},bottomVisible:{callback:o,name:"onBottomVisible"},passing:{callback:u,name:"onPassing"},offScreen:{callback:m,name:"onOffScreen"},onScreen:{callback:b,name:"onOnScreen"},topPassed:{callback:p,name:"onTopPassed"},topVisible:{callback:h,name:"onTopVisible"}},y={bottomPassed:{callback:s,name:"onBottomPassedReverse"},bottomVisible:{callback:r,name:"onBottomVisibleReverse"},passing:{callback:l,name:"onPassingReverse"},topPassed:{callback:d,name:"onTopPassedReverse"},topVisible:{callback:f,name:"onTopVisibleReverse"}};i()(e.props,"onUpdate",null,Object(a.a)({},e.props,{calculations:e.calculations})),e.fireOnPassed(),c()(y,(function(t,n){return e.fire(t,n,!0)})),c()(v,(function(t,n){return e.fire(t,n)})),"repaint"===g&&e.handleUpdate()}},e}Object(s.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){if(this.mounted=!0,Object(b.a)()){var t=this.props,e=t.context,n=t.fireOnMount,a=t.updateOn;this.pageYOffset=this.getPageYOffset(),this.attachHandlers(e,a),n&&this.update()}},n.componentDidUpdate=function(t){(t.continuous!==this.props.continuous||t.once!==this.props.once||t.updateOn!==this.props.updateOn)&&(this.firedCallbacks=[]),t.context===this.props.context&&t.updateOn===this.props.updateOn||(this.unattachHandlers(t.context),this.attachHandlers(this.props.context,this.props.updateOn))},n.componentWillUnmount=function(){var t=this.props.context;this.unattachHandlers(t),this.mounted=!1},n.attachHandlers=function(t,e){"events"!==e?this.handleUpdate():t&&(g.a.sub("resize",this.handleUpdate,{target:t}),g.a.sub("scroll",this.handleUpdate,{target:t}))},n.unattachHandlers=function(t){t&&(g.a.unsub("resize",this.handleUpdate,{target:t}),g.a.unsub("scroll",this.handleUpdate,{target:t})),this.frameId&&cancelAnimationFrame(this.frameId)},n.execute=function(t,e){var n=this.props.continuous;t&&(!n&&d()(this.firedCallbacks,e)||(t(null,Object(a.a)({},this.props,{calculations:this.calculations})),this.firedCallbacks.push(e)))},n.fireOnPassed=function(){var t=this,e=this.calculations,n=e.percentagePassed,a=e.pixelsPassed,s=this.props.onPassed;c()(s,(function(e,s){var o=Number(s);if(o&&a>=o)t.execute(e,s);else{var i=(""+s).match(/^(\d+)%$/);if(i){var r=Number(i[1])/100;n>=r&&t.execute(e,s)}}}))},n.computeCalculations=function(){var t=this.props.offset,e=this.ref.current.getBoundingClientRect(),n=e.bottom,a=e.height,s=e.top,o=e.width,i=Object(v.a)(t),r=i[0],c=i[1],u=this.getPageYOffset()>this.pageYOffset?"down":"up",l=s<r,p=n<c,d=p?0:Math.max(-1*s,0),h=d/a,f=n>=c&&n<=window.innerHeight,m=s>=r&&s<=window.innerHeight,b=(m||l)&&!p;return{bottomPassed:p,bottomVisible:f,direction:u,fits:m&&f,height:a,passing:l&&!p,percentagePassed:h,pixelsPassed:d,offScreen:!b,onScreen:b,topPassed:l,topVisible:m,width:o}},n.getPageYOffset=function(){var t=this.props.context;return t?t===window?window.pageYOffset:t.scrollTop:0},n.render=function(){var t=this.props.children,n=Object(y.a)(e,this.props),a=Object(O.a)(e,this.props);return m.a.createElement(h.a,{innerRef:this.ref},m.a.createElement(n,a,t))},e}(f.Component);x.handledProps=["as","children","context","continuous","fireOnMount","offset","onBottomPassed","onBottomPassedReverse","onBottomVisible","onBottomVisibleReverse","onOffScreen","onOnScreen","onPassed","onPassing","onPassingReverse","onTopPassed","onTopPassedReverse","onTopVisible","onTopVisibleReverse","onUpdate","once","updateOn"],x.propTypes={},x.defaultProps={context:Object(b.a)()?window:null,continuous:!1,offset:[0,0],once:!0,updateOn:"events"}},QOAx:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/buy_tokens/20",function(){return n("8ZpQ")}])},TIbl:function(t,e,n){"use strict";e.a=function(t){return"number"===typeof t||"string"===typeof t?[t,t]:t}}},[["QOAx",0,1,2,3,4,6,7]]]);