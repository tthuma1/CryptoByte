_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"+Q4Y":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sell",function(){return r("YkDJ")}])},YkDJ:function(e,t,r){"use strict";r.r(t);var n,a,s,i=r("o0o1"),c=r.n(i),o=r("HaE+"),u=r("1OyB"),l=r("vuIU"),h=r("JX7q"),p=r("Ji7U"),d=r("md7G"),f=r("foSv"),g=r("rePB"),m=r("q1tI"),v=r.n(m),b=r("5Yp1"),w=r("yE/o"),y=r("aQu0"),E=r("vFsZ"),P=r("umxb"),k=r("TbSc"),S=r("QetY"),T=r("igWR"),x=r("yo71"),O=r("oZBQ"),j=v.a.createElement;function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var _=function(e){Object(p.a)(r,e);var t=H(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),Object(g.a)(Object(h.a)(e),"state",{mounted:!1,headerHeight:0,pausedHeight:0,newPrice:"",newPriceErr:!1,msgErr:!1,loading:!1,success:!1,currentPrice:0,saleLoading:!1}),Object(g.a)(Object(h.a)(e),"removeSale",function(){var t=Object(o.a)(c.a.mark((function t(r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),e.setState({saleLoading:!0,msgErr:""}),t.prev=2,t.next=5,T.a.methods.setTokenPrice(e.props.id,0).send({from:n});case 5:e.setState({saleLoading:!1,success:!0}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),e.setState({saleLoading:!1,msgErr:t.t0.message});case 11:return t.t1=e,t.next=14,T.a.methods.getTokenPrice(e.props.id).call();case 14:t.t2=t.sent,t.t3={currentPrice:t.t2},t.t1.setState.call(t.t1,t.t3);case 17:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()),Object(g.a)(Object(h.a)(e),"onSubmit",function(){var t=Object(o.a)(c.a.mark((function t(r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),e.setState({loading:!0,msgErr:""}),t.prev=2,!e.state.newPriceErr&&""!==e.state.newPrice){t.next=5;break}throw{message:"Invalid token price."};case 5:return t.next=7,T.a.methods.setTokenPrice(e.props.id,O.a.utils.toWei(e.state.newPrice,"ether")).send({from:n});case 7:e.setState({loading:!1,success:!0}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.setState({loading:!1,msgErr:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()),e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.eth.getAccounts();case 2:return n=e.sent[0],a=document.getElementById("header"),t=setInterval((function(){"visible"===a.style.visibility&&(s=document.getElementById("pausedmsg"),r.setState({headerHeight:a.clientHeight,pausedHeight:s.clientHeight}),clearInterval(t))}),100),window.addEventListener("pausedClosed",(function(e){r.setState({pausedHeight:0})})),e.t0=this,e.next=9,T.a.methods.getTokenPrice(this.props.id).call();case 9:e.t1=e.sent,e.t2={currentPrice:e.t1},e.t0.setState.call(e.t0,e.t2),this.setState({mounted:!0});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return j(b.a,{mounted:!0},j(x.a,null),j(w.a,{style:{marginTop:this.state.pausedHeight?20:this.state.headerHeight+20}},j(y.a,{as:"h3",inverted:!0,dividing:!0,textAlign:"center"},"You can change the price of your ERC721 tokens with the form below."),j(E.a,{inverted:!0,onSubmit:this.onSubmit},j(E.a.Group,{widths:"equal"},j(E.a.Input,{label:"Token price",error:this.state.newPriceErr},j(P.a,{placeholder:"123",value:this.state.newPrice,label:"ETH",labelPosition:"right",onChange:function(t){e.setState({newPrice:t.target.value}),(isNaN(t.target.value)||parseFloat(t.target.value)<0||"0x"===t.target.value.substring(0,2))&&""!==t.target.value?e.setState({newPriceErr:{content:"The price must be a positive number."}}):e.setState({newPriceErr:!1})}}))),this.state.newPrice&&!this.state.newPriceErr&&j(k.a,{info:!0},j("p",null,"This is going to change the price of your ERC721 token with"," ",j("b",null,"ID ",this.props.id)," to ",j("b",null,this.state.newPrice," ETH"),".",j("br",null))),this.state.msgErr&&j("div",null,j(k.a,{negative:!0,compact:!0},j(k.a.Header,null,"Something went wrong!"),this.state.msgErr),j("br",null)),this.state.success&&j("div",null,j(k.a,{positive:!0,compact:!0},j(k.a.Header,null,"Transaction complete!"),"The transaction was completed successfully."),j("br",null)),j(S.a,{type:"submit",loading:this.state.loading,disabled:this.state.loading},"Submit"),Number(this.state.currentPrice)?j("div",null,j("p",{style:{color:"white",marginBottom:"5px",marginTop:"40px"}},"This token is currently up for sale for"," ",O.a.utils.fromWei(this.state.currentPrice,"ether")," ETH. To remove it from sale, click the button bellow."),j(S.a,{color:"red",onClick:this.removeSale,loading:this.state.saleLoading,disabled:this.state.saleLoading},"Remove from sale")):"")))}}],[{key:"getInitialProps",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,e.abrupt("return",{id:r.id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(m.Component);t.default=_}},[["+Q4Y",0,1,2,3,4,5,6]]]);